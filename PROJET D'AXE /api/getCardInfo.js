const urlParams = new URLSearchParams(window.location.search); // Récupère les paramètres de l'URL
const cardId = urlParams.get("card"); // Récupère la valeur du paramètre "card" dans l'URL

function fetchCardInfo() { // Fetch les informations de la carte de personnage de l'API
  const apiUrl = "https://hp-api.lainocs.fr/characters/" + cardId; // URL de l'API avec l'ID de la carte

  return fetch(apiUrl).then((response) => response.json());
}

async function displayCardInfo() { // Affiche les informations de la carte de personnage
  const data = await fetchCardInfo(); // Récupère les données de l'API
  console.log(data);
  let birthdate = data.birthday.slice(0, -14); // Récupère les données de la date de naissance et enlève les heures
  let gallery = document.querySelector(".card_container");
  let htmlContent = `
  
  <div class="container_cardinfo">
    <div class="container_image">
        <img
          src="${data.image}"
          alt="${data.name}"
        />
    </div> 
    <div class="container_info">
      <div class="content_info_name">${data.name}</div>
        <div class="content_info_container">
          <div class="content_info">
            <div class="content_info_icon"> 
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" style="height: 1.5rem; width:1.5rem;"><g class="" transform="translate(0,0)" style=""><path d="M133.2 25l-53.69 94H432.5l-53.7-94H133.2zM25 137v46h462v-46H25zm32 64v46h46v-46H57zm352 0v46h46v-46h-46zm-171.4.6s-22 8.8-24 18.8c-4.6 22.8 33.9 60.8 33.9 60.8s-13.3-34.6-14.3-52.8c-.5-9.1 4.4-26.8 4.4-26.8zm54.4 14.8c-6.1 40.2-11.2 83.7-45.9 100.2-30.3 14.4-36.4-78.5-94.1-91.5 44.9 101.1-68.9 139.9 42.2 185.2h19.5c-24-25.9-34.4-90.8-34.4-90.8s30.2 72 62.5 74.2c15 1 33.5-30.2 33.5-30.2s5.9 29.8-.1 46.8H319c27.3-14.8 44.6-35.7 51.2-57.3 6.5-20.9 3-42.5-10.9-59.9-8.6 51.8-21.4 62.8-55.1 74.1 36.6-44.7 20.2-119.2-12.2-150.8zM57 265v46h46v-46H57zm352 0v46h46v-46h-46zM57 329v78h46v-78H57zm352 0v78h46v-78h-46zM25 425v62h462v-62H25z" fill="#fff" fill-opacity="1"></path></g></svg>
            </div> 
            <p>${data.house}</p> 
          </div>
          <div class="content_info">
            <div class="content_info_icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" style="height: 1.5rem; width: 1.5rem;"><g class="" transform="translate(0,0)" style=""><path d="M255 45.4c-24.5 0-47 11.8-63.9 33.4-16.9 21.5-27.1 52.6-27.1 86.5 0 36 12.1 67.5 31 89.5l13.5 15-19.6 4.6c-52.3 11.9-77.4 36.9-91.75 75.2-13.7 35.7-15.6 84.8-16.1 143.3H431c-.2-58.7-.5-109.3-13-145.5-13.4-39.4-37.9-64.3-94-75.4l-19.9-3.7 12.9-15.7c17.7-21.9 28.8-52.6 28.8-87.5 0-33.9-10.3-64.9-27.2-86.3-16.8-21.7-39.3-33.6-63.6-33.4z" fill="#fff" fill-opacity="1"></path></g></svg>
            </div>
            <p>${data.role}</p> 
          </div>

    

`;
  if (data.blood === "Half-Blood") { // Condition pour afficher le sang du personnage
    htmlContent += `
        <div class="content_info">
          <div class="content_info_icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" style="height: 1.5rem; width: 1.5rem;"><g class="" transform="translate(0,0)" style=""><path d="M251.25 19.28c-13.905 0-26.786 7.33-36.688 20.345-9.9 13.015-16.343 31.59-16.343 52.313 0 20.72 6.44 39.297 16.343 52.312 9.9 13.015 22.782 20.344 36.687 20.344 13.905 0 26.755-7.33 36.656-20.344 9.9-13.015 16.375-31.59 16.375-52.313 0-20.72-6.473-39.297-16.374-52.312-9.9-13.015-22.75-20.344-36.656-20.344zM458 62.688c-12.144.097-24.223 6.945-28.5 22.094l-22.844 58.876-84.812-28.625-1.72 2.564c-3.273 14.37-9.258 27.34-17.343 37.97-12.673 16.66-30.986 27.717-51.53 27.717s-38.888-11.057-51.563-27.718c-8.236-10.827-14.277-24.087-17.5-38.78l-1.156-1.75-84.843 28.624L73.344 84.78c-4.442-15.73-17.307-22.494-29.906-22.06-17.266.59-34.024 14.718-27.938 37.81l40.094 112.657 108.437-27.593c55.63 82.465 57.87 164.886 18.782 247.28-.897-59.192-32.693-109.31-12.093-143.562-56.293 56.476-5.773 107.04-66.75 171.282 2.864-26.386-1.006-52.772-9.907-79.156 3.018 38.405 4.197 76.575-64.97 106.312h121.72c-.03.043-.065.082-.094.125h204.25c-.025-.04-.04-.085-.064-.125h126.5c-78.297-44.57-24.935-76.987-71.062-113.813 14.31 18.935-6.456 46.304-8.563 78.657-57.428-47.286-55.368-102.286-51.342-157.53-16.372 52.345-22.614 104.683-14.97 157.03-43.72-88.616-51.953-177.227 6-265.844l105.813 26.938 40.095-112.657c6.25-23.716-11.626-37.983-29.375-37.843zM213.156 95H244v18.688h-30.844V95zm45.03 0h30.845v18.688H258.19V95zm145.72 214.78c-37.668 6.744-45.553 52.718-8.53 67.283-9.3-23.13-6.25-45.49 8.53-67.282z" fill="#fff" fill-opacity="1"></path></g></svg>      
          </div>
          <p>${data.blood}</p> 
        </div>
    `;
  }
  else {
    htmlContent += `
        <div class="content_info">
          <div class="content_info_icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" style="height: 1.5rem; width: 1.5rem;"><g class="" transform="translate(0,0)" style=""><path d="M256 41c-29.03 0-56.162 11.49-78.38 31.12 1.61 1.512 3.192 3.022 4.714 4.49 9.823 9.47 18.386 17.234 26.963 18.484 5.004.73 11.068-1.446 18.715-4.95 7.647-3.503 16.566-8.274 27.62-8.294 11.163-.02 20.207 4.76 27.975 8.28 7.77 3.522 13.955 5.722 19.08 4.966 8.583-1.267 17.153-9.04 26.98-18.506 1.52-1.464 3.095-2.97 4.704-4.48C312.156 52.488 285.027 41 256 41zM143.572 72.99c-1.595-.076-5.878 2.043-9.21 5.373-4.138 4.14-8.75 9.024-11.485 13.395-2.736 4.37-3.203 7.102-2.465 9.043 3.604 9.48 12.928 14.148 27.156 17.555 14.228 3.408 31.67 4.636 46.905 8.99 20.49 5.857 41.04 10.94 61.052 10.968 20.34.026 41.222-5.056 62.012-10.97 15.233-4.332 32.672-5.563 46.897-8.974 14.224-3.412 23.55-8.088 27.154-17.57.738-1.94.27-4.672-2.465-9.042-2.736-4.37-7.347-9.256-11.486-13.395-3.33-3.33-7.614-5.45-9.21-5.373-8.463.402-16.603 7.244-26.273 16.56-9.67 9.317-20.536 20.948-36.84 23.354-11.4 1.683-21.038-2.707-29.138-6.38-8.1-3.67-14.97-6.685-20.51-6.674-5.422.01-12.174 3.002-20.156 6.66-7.983 3.657-17.506 8.043-28.807 6.396-16.317-2.377-27.19-14.016-36.86-23.34-9.672-9.323-17.813-16.174-26.27-16.576zm-8.437 60.555C126.11 155.883 121 181.13 121 208c0 67.545 32.248 124.872 78 151.332v-5.795h18v9s-.073 4.904 4.2 10.6c4.27 5.696 12.8 12.4 34.8 12.4 22 0 30.53-6.704 34.8-12.4 4.273-5.696 4.2-10.6 4.2-10.6v-9h18v5.795c45.752-26.46 78-83.787 78-151.332 0-26.865-5.11-52.11-14.13-74.443-2.73.888-5.49 1.657-8.24 2.316-16.316 3.913-33.775 5.26-46.167 8.783-21.193 6.028-43.652 11.687-66.96 11.656-22.997-.03-45.113-5.695-65.976-11.658-12.38-3.538-29.835-4.887-46.152-8.795-2.75-.66-5.51-1.428-8.24-2.315zm-29.02 37.197c-6.307 1.07-11.955 2.64-16.623 4.72-9.613 4.29-14.883 9.754-16.68 18.376-1.835 8.79 4.34 18.974 15.292 29.193 5.215 4.868 10.972 9.264 16.693 13.33-1.18-9.257-1.797-18.73-1.797-28.36 0-12.74 1.073-25.202 3.115-37.258zm299.77 0C407.927 182.798 409 195.262 409 208c0 9.63-.616 19.103-1.797 28.36 5.72-4.066 11.478-8.462 16.693-13.33 10.953-10.218 17.127-20.4 15.293-29.192-1.8-8.622-7.07-14.087-16.682-18.375-4.668-2.082-10.315-3.652-16.623-4.72zM151 179.428h82v18h-17.893C216.335 200.745 217 204.332 217 208c0 14.537-10.435 27.842-25 27.842S167 222.537 167 208c0-3.668.665-7.255 1.893-10.572H151v-18zm128 0h82v18h-17.893C344.335 200.745 345 204.332 345 208c0 14.537-10.435 27.842-25 27.842S295 222.537 295 208c0-3.668.665-7.255 1.893-10.572H279v-18zm-87 18.73c-3.11 0-7 3.566-7 9.842 0 6.276 3.89 9.842 7 9.842s7-3.566 7-9.842c0-6.276-3.89-9.842-7-9.842zm128 0c-3.11 0-7 3.566-7 9.842 0 6.276 3.89 9.842 7 9.842s7-3.566 7-9.842c0-6.276-3.89-9.842-7-9.842zm-96.615 29.13l6.664 6.048c10.193 9.253 18.694 12.328 26.63 12.053 7.936-.277 16.305-4.164 25.375-12.146l6.756-5.945 11.89 13.51-6.755 5.946c-11.043 9.72-23.294 16.16-36.64 16.623-13.347.462-26.79-5.312-39.354-16.716l-6.663-6.05 12.098-13.327zm-40.37 28.173l17.97 1.08c-.528 8.798-2.63 16.397-5.788 23.036 46.533 15.463 75.073 15.463 121.606 0-3.158-6.64-5.26-14.238-5.787-23.037l17.968-1.08c1.277 21.287 12.412 30.7 27.993 41.042l-9.954 14.996c-6.863-4.555-13.805-9.87-19.744-16.437l-4.434 1.48c-49.14 16.38-84.553 16.38-133.692 0l-4.433-1.48c-5.938 6.567-12.88 11.883-19.743 16.438l-9.954-14.996c15.58-10.34 26.716-19.755 27.993-41.04zm-53.247 57.112c-11.485 7.137-19.815 15.392-24.174 24.328 15.652 60.648 38.172 93.902 64.263 116.266 22.97 19.69 49.378 31.227 77.143 44.504V441h-32v-18h32v-19.86c-20.637-1.876-33.41-10.15-40.2-19.202-.244-.327-.46-.655-.69-.983-31.41-13.046-58.028-38.055-76.342-70.383zm252.464 0c-18.314 32.328-44.93 57.337-76.34 70.383-.23.328-.448.656-.693.983-6.79 9.053-19.563 17.326-40.2 19.2V423h32v18h-32v56.67c27.765-13.277 54.172-24.815 77.143-44.504 26.09-22.364 48.61-55.618 64.263-116.266-4.36-8.936-12.69-17.19-24.174-24.328zM231 327h50v18h-50v-18zM89.107 345.256c-19.795 1.35-39.674 8.244-54.736 16.61-6.51 3.618-12.106 7.51-16.37 11.148V494h37v-39h18v39h125.602c-13.88-7.477-27.505-16.063-40.46-27.166-28.365-24.313-52.697-60.595-69.035-121.578zm333.786 0c-16.338 60.983-40.67 97.265-69.036 121.578-12.954 11.103-26.58 19.69-40.46 27.166H439v-39h18v39h37V373.014c-4.264-3.637-9.86-7.53-16.37-11.147-15.063-8.367-34.942-15.262-54.737-16.61z" fill="#fff" fill-opacity="1"></path></g></svg>     
          </div>
          <p>${data.blood}</p> 
        </div>
    `;

  }

  if (data.birthday !== "") { // Condition pour afficher la date de naissance
    htmlContent += `
        <div class="content_info">
          <div class="content_info_icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" style="height: 1.5rem; width: 1.5rem;"><g class="" transform="translate(0,0)" style=""><path d="M153 73v27.3c12-6.92 25.5-13.3 39-13.3 16 0 27.6 9.96 37.6 18 10 8 18.5 14 26.4 14 7.9 0 16.4-6 26.4-14 10-8.04 21.6-18 37.6-18 13.5 0 27 6.38 39 13.3V73H153zm39 32c-7.9 0-23.8 7-36.2 14.7-1 .6-1.9 1.2-2.8 1.7V183h206v-61.6c-.9-.5-1.8-1.1-2.8-1.7C343.8 112 327.9 105 320 105c-7.9 0-16.4 6-26.4 14S272 137 256 137s-27.6-10-37.6-18-18.5-14-26.4-14zM89 201v27.3c12-6.9 25.6-13.3 39-13.3 16 0 27.6 10 37.6 18s18.5 14 26.4 14c7.9 0 16.4-6 26.4-14s21.6-18 37.6-18 27.6 10 37.6 18 18.5 14 26.4 14c7.9 0 16.4-6 26.4-14s21.6-18 37.6-18c13.5 0 27 6.4 39 13.3V201H89zm39 32c-7.9 0-23.8 7-36.25 14.7-.95.6-1.84 1.1-2.75 1.7V311h38.3l.5-1.3.5 1.3h127.4l.3-.7.3.7h127.4l.5-1.3.5 1.3H423v-61.6c-.9-.5-1.8-1.1-2.8-1.7C407.8 240 391.9 233 384 233c-7.9 0-16.4 6-26.4 14S336 265 320 265s-27.6-10-37.6-18-18.5-14-26.4-14c-7.9 0-16.4 6-26.4 14S208 265 192 265s-27.6-10-37.6-18-18.5-14-26.4-14zm-87 96v6.7c.02.5.95 18.4 5.12 36.7 2.12 9.3 5.12 18.5 8.74 24.9 3.62 6.5 7.2 9.3 10.46 9.8 4.6.7 10.17-1.7 16.71-8 6.54-6.3 13.19-15.8 18.87-25.7 11.2-19.7 18.6-40.4 18.6-40.4l1.4-4H41zm94 0l1.4 3.8s7.3 19.5 18.6 38.6c5.6 9.6 12.2 19.1 18.9 25.7 6.7 6.6 13.1 9.9 18.1 9.9 5 0 11.4-3.3 18.1-9.9 6.7-6.6 13.3-16.1 18.9-25.7 11.3-19.1 18.6-38.6 18.6-38.6l1.4-3.8H135zm128 0l1.4 3.8s7.3 19.5 18.6 38.6c5.6 9.6 12.2 19.1 18.9 25.7 6.7 6.6 13.1 9.9 18.1 9.9 5 0 11.4-3.3 18.1-9.9 6.7-6.6 13.3-16.1 18.9-25.7 11.3-19.1 18.6-38.6 18.6-38.6l1.4-3.8H263zm128.1 0l1.4 4s7.4 20.7 18.6 40.4c5.7 9.9 12.3 19.4 18.9 25.7 6.5 6.3 12.1 8.7 16.7 8 3.2-.5 6.8-3.3 10.4-9.8 3.7-6.4 6.7-15.6 8.8-24.9 4.2-18.5 5.1-36.8 5.1-36.8V329h-79.9zM256 358.5c-3.1 6.7-6.8 14.2-11.5 22.1-6.1 10.4-13.3 20.9-21.8 29.3-8.5 8.4-18.7 15.1-30.7 15.1s-22.2-6.7-30.7-15.1c-8.5-8.4-15.7-18.9-21.8-29.3-4.6-7.7-8.2-15-11.3-21.6-3.2 7.1-7 15.1-11.7 23.3-6.1 10.8-13.4 21.5-22.02 29.8s-19.5 14.6-31.8 12.8c-9.7-1.4-16.7-8-21.68-15.8V487h430v-77.9c-4.9 7.8-11.9 14.4-21.7 15.8-12.3 1.8-23.2-4.5-31.8-12.8-8.6-8.3-15.9-19-22-29.8-4.7-8.2-8.5-16.2-11.7-23.3-3.1 6.6-6.7 13.9-11.3 21.6-6.1 10.4-13.3 20.9-21.8 29.3-8.5 8.4-18.7 15.1-30.7 15.1s-22.2-6.7-30.7-15.1c-8.5-8.4-15.7-18.9-21.8-29.3-4.7-7.9-8.4-15.4-11.5-22.1z" fill="#fff" fill-opacity="1"></path></g></svg>
          </div>
          <p> ${birthdate}</p>
        </div>
      </div>
    </div>
  </div>
  `;
  }

  gallery.innerHTML = htmlContent; // Affiche le contenu HTML
}

displayCardInfo(); // Appel de la fonction pour afficher les informations de la carte de personnage
